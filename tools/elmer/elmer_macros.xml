<macros>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="3.2.1">R</requirement>
            <requirement type="package" version="1.0">ELMER</requirement>
        </requirements>
    </xml>
    
    <xml name="citations">
        <citations>
            <citation type="doi">10.1186/s13059-015-0668-3</citation>
        </citations>
    </xml>
    
    <!-- Minfi config options -->
    <xml name="minfi_config">
        <configfiles>
            <configfile name="minfi_get_files"><![CDATA[
            ### Parse the HDA's to get the path of each forward and reverse dataset
            #for $key in $control.keys()
                control $control[$key].forward  $control[$key].reverse $control[$key].name
            #end for
            #for $key in $case.keys()
                case  $case[$key].forward $case[$key].reverse $case[$key].name
            #end for
            ]]></configfile>
        </configfiles>
    </xml>

    <!-- Minfi input options -->
    <xml name="minfi_input">
        <param name="control" type="data_collection" format="idat" label="Condition 1/ Treatment" collection_type="list:paired" help="Input data needs to be a list of dataset pairs, where the files are in IDAT format"/>
        <param name="case" type="data_collection" format="idat" label="Condition 2/ Wildtype" collection_type="list:paired" help="Input data needs to be a list of dataset pairs, where the files are in IDAT format"/>
        <conditional name="preprocess">
            <param name="preprocess_method" type="select" label="Select Preprocessing Method">           
                <option value="quantile">Quantile Normalization (Recommended)</option>
                <option value="funnorm">Functional Normalization (Recommended)</option>
                <option value="illumina">Illumina:Genome Studio Normalization</option>
                <option value="swan">Subset-quantile Within Array Normalisation</option>
                <option value="noob">Noob background correction method or Noob Normalization</option>
            </param>
            <when value="quantile"> </when>
            <when value="funnorm"> </when>
            <when value="illumina"> </when>
            <when value="swan"> </when>
            <when value="noob"> </when>
        </conditional>
    </xml>

</macros>

